{"ast":null,"code":"import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import{loginUser,registerUser}from'../api/auth';// Ba�lang�� durumu\nconst initialState={user:JSON.parse(localStorage.getItem('user'))||null,token:localStorage.getItem('token')||null,isLoading:false,error:null};// Async thunks\nexport const login=createAsyncThunk('auth/login',async(_ref,_ref2)=>{let{username,password}=_ref;let{rejectWithValue}=_ref2;try{const data=await loginUser(username,password);localStorage.setItem('token',data.token);localStorage.setItem('user',JSON.stringify(data.user));return data;}catch(error){var _error$response,_error$response$data;return rejectWithValue(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Giri� ba�ar�s�z');}});export const register=createAsyncThunk('auth/register',async(_ref3,_ref4)=>{let{username,email,password}=_ref3;let{rejectWithValue}=_ref4;try{const data=await registerUser(username,email,password);return data;}catch(error){var _error$response2,_error$response2$data;return rejectWithValue(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Kay�t ba�ar�s�z');}});// Auth slice\nconst authSlice=createSlice({name:'auth',initialState,reducers:{logout:state=>{localStorage.removeItem('token');localStorage.removeItem('user');state.user=null;state.token=null;}},extraReducers:builder=>{builder// Login cases\n.addCase(login.pending,state=>{state.isLoading=true;state.error=null;}).addCase(login.fulfilled,(state,action)=>{state.isLoading=false;state.user=action.payload.user;state.token=action.payload.token;}).addCase(login.rejected,(state,action)=>{state.isLoading=false;state.error=action.payload;})// Register cases\n.addCase(register.pending,state=>{state.isLoading=true;state.error=null;}).addCase(register.fulfilled,state=>{state.isLoading=false;}).addCase(register.rejected,(state,action)=>{state.isLoading=false;state.error=action.payload;});}});export const{logout}=authSlice.actions;export default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","loginUser","registerUser","initialState","user","JSON","parse","localStorage","getItem","token","isLoading","error","login","_ref","_ref2","username","password","rejectWithValue","data","setItem","stringify","_error$response","_error$response$data","response","message","register","_ref3","_ref4","email","_error$response2","_error$response2$data","authSlice","name","reducers","logout","state","removeItem","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["C:/XMLFinalClient/ecommerce-frontend/src/store/authSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { loginUser, registerUser } from '../api/auth';\n\n// Ba�lang�� durumu\nconst initialState = {\n    user: JSON.parse(localStorage.getItem('user')) || null,\n    token: localStorage.getItem('token') || null,\n    isLoading: false,\n    error: null,\n};\n\n// Async thunks\nexport const login = createAsyncThunk(\n    'auth/login',\n    async ({ username, password }, { rejectWithValue }) => {\n        try {\n            const data = await loginUser(username, password);\n            localStorage.setItem('token', data.token);\n            localStorage.setItem('user', JSON.stringify(data.user));\n            return data;\n        } catch (error) {\n            return rejectWithValue(error.response?.data?.message || 'Giri� ba�ar�s�z');\n        }\n    }\n);\n\nexport const register = createAsyncThunk(\n    'auth/register',\n    async ({ username, email, password }, { rejectWithValue }) => {\n        try {\n            const data = await registerUser(username, email, password);\n            return data;\n        } catch (error) {\n            return rejectWithValue(error.response?.data?.message || 'Kay�t ba�ar�s�z');\n        }\n    }\n);\n\n// Auth slice\nconst authSlice = createSlice({\n    name: 'auth',\n    initialState,\n    reducers: {\n        logout: (state) => {\n            localStorage.removeItem('token');\n            localStorage.removeItem('user');\n            state.user = null;\n            state.token = null;\n        },\n    },\n    extraReducers: (builder) => {\n        builder\n            // Login cases\n            .addCase(login.pending, (state) => {\n                state.isLoading = true;\n                state.error = null;\n            })\n            .addCase(login.fulfilled, (state, action) => {\n                state.isLoading = false;\n                state.user = action.payload.user;\n                state.token = action.payload.token;\n            })\n            .addCase(login.rejected, (state, action) => {\n                state.isLoading = false;\n                state.error = action.payload;\n            })\n            // Register cases\n            .addCase(register.pending, (state) => {\n                state.isLoading = true;\n                state.error = null;\n            })\n            .addCase(register.fulfilled, (state) => {\n                state.isLoading = false;\n            })\n            .addCase(register.rejected, (state, action) => {\n                state.isLoading = false;\n                state.error = action.payload;\n            });\n    },\n});\n\nexport const { logout } = authSlice.actions;\nexport default authSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}