{"ast":null,"code":"import React,{useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import{fetchProductById,removeProduct}from'../../store/productSlice';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProductDetail=()=>{const{id}=useParams();const navigate=useNavigate();const dispatch=useDispatch();const{selectedProduct,isLoading,error}=useSelector(state=>state.products);const{user}=useSelector(state=>state.auth);const isAdmin=user&&user.role==='Admin';useEffect(()=>{dispatch(fetchProductById(id));},[dispatch,id]);const handleEdit=()=>{navigate(\"/admin/products/edit/\".concat(id));};const handleDelete=async()=>{if(window.confirm('Bu �r�n� silmek istedi�inizden emin misiniz?')){try{await dispatch(removeProduct(id)).unwrap();navigate('/products');}catch(err){// Error is handled by the reducer\n}}};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center my-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Y\\uFFFDkleniyor...\"})})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:error});}if(!selectedProduct){return/*#__PURE__*/_jsx(\"div\",{className:\"container my-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning\",role:\"alert\",children:\"\\uFFFDr\\uFFFDn bulunamad\\uFFFD!\"})});}return/*#__PURE__*/_jsx(\"div\",{className:\"container my-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:5000\".concat(selectedProduct.imageUrl),className:\"img-fluid rounded\",alt:selectedProduct.name,onError:e=>{e.target.onerror=null;e.target.src='https://via.placeholder.com/600x400?text=�r�n+Resmi';}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(\"h1\",{children:selectedProduct.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted\",children:[\"Kategori ID: \",selectedProduct.categoryId]}),/*#__PURE__*/_jsxs(\"p\",{className:\"fs-3 text-primary fw-bold\",children:[selectedProduct.price.toFixed(2),\" TL\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"my-4\",children:selectedProduct.description}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Stok Durumu:\"}),\" \",selectedProduct.stockQuantity>0?\"\".concat(selectedProduct.stockQuantity,\" adet\"):'Stokta yok']}),selectedProduct.stockQuantity>0&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success btn-lg me-2\",children:\"Sepete Ekle\"}),isAdmin&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning me-2\",onClick:handleEdit,children:\"D\\uFFFDzenle\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:handleDelete,children:\"Sil\"})]})]})]})});};export default ProductDetail;","map":{"version":3,"names":["React","useEffect","useParams","useNavigate","useSelector","useDispatch","fetchProductById","removeProduct","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductDetail","id","navigate","dispatch","selectedProduct","isLoading","error","state","products","user","auth","isAdmin","role","handleEdit","concat","handleDelete","window","confirm","unwrap","err","className","children","src","imageUrl","alt","name","onError","e","target","onerror","categoryId","price","toFixed","description","stockQuantity","onClick"],"sources":["C:/XMLFinalClient/ecommerce-frontend/src/components/Products/ProductDetail.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { fetchProductById, removeProduct } from '../../store/productSlice';\n\nconst ProductDetail = () => {\n    const { id } = useParams();\n    const navigate = useNavigate();\n    const dispatch = useDispatch();\n    const { selectedProduct, isLoading, error } = useSelector((state) => state.products);\n    const { user } = useSelector((state) => state.auth);\n\n    const isAdmin = user && user.role === 'Admin';\n\n    useEffect(() => {\n        dispatch(fetchProductById(id));\n    }, [dispatch, id]);\n\n    const handleEdit = () => {\n        navigate(`/admin/products/edit/${id}`);\n    };\n\n    const handleDelete = async () => {\n        if (window.confirm('Bu �r�n� silmek istedi�inizden emin misiniz?')) {\n            try {\n                await dispatch(removeProduct(id)).unwrap();\n                navigate('/products');\n            } catch (err) {\n                // Error is handled by the reducer\n            }\n        }\n    };\n\n    if (isLoading) {\n        return (\n            <div className=\"text-center my-5\">\n                <div className=\"spinner-border\" role=\"status\">\n                    <span className=\"visually-hidden\">Y�kleniyor...</span>\n                </div>\n            </div>\n        );\n    }\n\n    if (error) {\n        return (\n            <div className=\"alert alert-danger\" role=\"alert\">\n                {error}\n            </div>\n        );\n    }\n\n    if (!selectedProduct) {\n        return (\n            <div className=\"container my-5\">\n                <div className=\"alert alert-warning\" role=\"alert\">\n                    �r�n bulunamad�!\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"container my-5\">\n            <div className=\"row\">\n                <div className=\"col-md-6\">\n                    <img\n                        src={`http://localhost:5000${selectedProduct.imageUrl}`}\n                        className=\"img-fluid rounded\"\n                        alt={selectedProduct.name}\n                        onError={(e) => {\n                            e.target.onerror = null;\n                            e.target.src = 'https://via.placeholder.com/600x400?text=�r�n+Resmi';\n                        }}\n                    />\n                </div>\n                <div className=\"col-md-6\">\n                    <h1>{selectedProduct.name}</h1>\n                    <p className=\"text-muted\">Kategori ID: {selectedProduct.categoryId}</p>\n                    <p className=\"fs-3 text-primary fw-bold\">{selectedProduct.price.toFixed(2)} TL</p>\n                    <p className=\"my-4\">{selectedProduct.description}</p>\n                    <p>\n                        <strong>Stok Durumu:</strong> {selectedProduct.stockQuantity > 0\n                            ? `${selectedProduct.stockQuantity} adet`\n                            : 'Stokta yok'}\n                    </p>\n\n                    {selectedProduct.stockQuantity > 0 && (\n                        <button className=\"btn btn-success btn-lg me-2\">\n                            Sepete Ekle\n                        </button>\n                    )}\n\n                    {isAdmin && (\n                        <>\n                            <button\n                                className=\"btn btn-warning me-2\"\n                                onClick={handleEdit}\n                            >\n                                D�zenle\n                            </button>\n                            <button\n                                className=\"btn btn-danger\"\n                                onClick={handleDelete}\n                            >\n                                Sil\n                            </button>\n                        </>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default ProductDetail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}