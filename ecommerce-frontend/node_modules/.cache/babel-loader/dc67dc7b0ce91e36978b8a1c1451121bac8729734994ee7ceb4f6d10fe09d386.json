{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { loginUser, registerUser } from '../api/auth';\n\n// Ba�lang�� durumu\nconst initialState = {\n  user: JSON.parse(localStorage.getItem('user')) || null,\n  token: localStorage.getItem('token') || null,\n  isLoading: false,\n  error: null\n};\n\n// Async thunks\nexport const login = createAsyncThunk('auth/login', async ({\n  username,\n  password\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const data = await loginUser(username, password);\n    localStorage.setItem('token', data.token);\n    localStorage.setItem('user', JSON.stringify(data.user));\n    return data;\n  } catch (error) {\n    var _error$response, _error$response$data;\n    return rejectWithValue(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Giri� ba�ar�s�z');\n  }\n});\nexport const register = createAsyncThunk('auth/register', async ({\n  username,\n  email,\n  password\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const data = await registerUser(username, email, password);\n    return data;\n  } catch (error) {\n    var _error$response2, _error$response2$data;\n    return rejectWithValue(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || 'Kay�t ba�ar�s�z');\n  }\n});\n\n// Auth slice\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    logout: state => {\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      state.user = null;\n      state.token = null;\n    }\n  },\n  extraReducers: builder => {\n    builder\n    // Login cases\n    .addCase(login.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(login.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n    }).addCase(login.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    })\n    // Register cases\n    .addCase(register.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(register.fulfilled, state => {\n      state.isLoading = false;\n    }).addCase(register.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  logout\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","loginUser","registerUser","initialState","user","JSON","parse","localStorage","getItem","token","isLoading","error","login","username","password","rejectWithValue","data","setItem","stringify","_error$response","_error$response$data","response","message","register","email","_error$response2","_error$response2$data","authSlice","name","reducers","logout","state","removeItem","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["C:/XMLFinalClient/ecommerce-frontend/src/store/authSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { loginUser, registerUser } from '../api/auth';\n\n// Ba�lang�� durumu\nconst initialState = {\n    user: JSON.parse(localStorage.getItem('user')) || null,\n    token: localStorage.getItem('token') || null,\n    isLoading: false,\n    error: null,\n};\n\n// Async thunks\nexport const login = createAsyncThunk(\n    'auth/login',\n    async ({ username, password }, { rejectWithValue }) => {\n        try {\n            const data = await loginUser(username, password);\n            localStorage.setItem('token', data.token);\n            localStorage.setItem('user', JSON.stringify(data.user));\n            return data;\n        } catch (error) {\n            return rejectWithValue(error.response?.data?.message || 'Giri� ba�ar�s�z');\n        }\n    }\n);\n\nexport const register = createAsyncThunk(\n    'auth/register',\n    async ({ username, email, password }, { rejectWithValue }) => {\n        try {\n            const data = await registerUser(username, email, password);\n            return data;\n        } catch (error) {\n            return rejectWithValue(error.response?.data?.message || 'Kay�t ba�ar�s�z');\n        }\n    }\n);\n\n// Auth slice\nconst authSlice = createSlice({\n    name: 'auth',\n    initialState,\n    reducers: {\n        logout: (state) => {\n            localStorage.removeItem('token');\n            localStorage.removeItem('user');\n            state.user = null;\n            state.token = null;\n        },\n    },\n    extraReducers: (builder) => {\n        builder\n            // Login cases\n            .addCase(login.pending, (state) => {\n                state.isLoading = true;\n                state.error = null;\n            })\n            .addCase(login.fulfilled, (state, action) => {\n                state.isLoading = false;\n                state.user = action.payload.user;\n                state.token = action.payload.token;\n            })\n            .addCase(login.rejected, (state, action) => {\n                state.isLoading = false;\n                state.error = action.payload;\n            })\n            // Register cases\n            .addCase(register.pending, (state) => {\n                state.isLoading = true;\n                state.error = null;\n            })\n            .addCase(register.fulfilled, (state) => {\n                state.isLoading = false;\n            })\n            .addCase(register.rejected, (state, action) => {\n                state.isLoading = false;\n                state.error = action.payload;\n            });\n    },\n});\n\nexport const { logout } = authSlice.actions;\nexport default authSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}