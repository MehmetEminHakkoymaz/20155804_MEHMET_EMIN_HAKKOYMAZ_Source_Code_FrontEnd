{"ast":null,"code":"import _objectSpread from\"C:/XMLFinalClient/ecommerce-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate,useParams}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{createProduct,fetchProductById,editProduct}from'../../store/productSlice';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductForm=()=>{const{id}=useParams();const isEditMode=Boolean(id);const navigate=useNavigate();const dispatch=useDispatch();const{selectedProduct,isLoading,error}=useSelector(state=>state.products);const[formData,setFormData]=useState({name:'',description:'',price:'',categoryId:'',imageUrl:'',stockQuantity:''});useEffect(()=>{if(isEditMode){dispatch(fetchProductById(id));}},[dispatch,id,isEditMode]);useEffect(()=>{if(isEditMode&&selectedProduct){setFormData({name:selectedProduct.name,description:selectedProduct.description,price:selectedProduct.price,categoryId:selectedProduct.categoryId,imageUrl:selectedProduct.imageUrl,stockQuantity:selectedProduct.stockQuantity});}},[selectedProduct,isEditMode]);const handleChange=e=>{const{name,value}=e.target;setFormData(_objectSpread(_objectSpread({},formData),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();// Form verilerini do�ru formata d�n��t�r\nconst productData=_objectSpread(_objectSpread({},formData),{},{price:parseFloat(formData.price),categoryId:parseInt(formData.categoryId),stockQuantity:parseInt(formData.stockQuantity)});try{if(isEditMode){await dispatch(editProduct({id,product:productData})).unwrap();}else{await dispatch(createProduct(productData)).unwrap();}navigate('/products');}catch(err){// Error is handled by the reducer\n}};if(isEditMode&&isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center my-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Y\\uFFFDkleniyor...\"})})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container my-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:isEditMode?'�r�n D�zenle':'Yeni �r�n Ekle'}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:\"form-label\",children:\"\\uFFFDr\\uFFFDn Ad\\uFFFD\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"name\",name:\"name\",value:formData.name,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",className:\"form-label\",children:\"A\\uFFFD\\uFFFDklama\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",id:\"description\",name:\"description\",rows:\"3\",value:formData.description,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price\",className:\"form-label\",children:\"Fiyat\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",id:\"price\",name:\"price\",value:formData.price,onChange:handleChange,min:\"0\",step:\"0.01\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"categoryId\",className:\"form-label\",children:\"Kategori ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",id:\"categoryId\",name:\"categoryId\",value:formData.categoryId,onChange:handleChange,min:\"1\",max:\"10\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"imageUrl\",className:\"form-label\",children:\"Resim URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",id:\"imageUrl\",name:\"imageUrl\",value:formData.imageUrl,onChange:handleChange,placeholder:\"/images/ornek.jpg\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"stockQuantity\",className:\"form-label\",children:\"Stok Miktar\\uFFFD\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",id:\"stockQuantity\",name:\"stockQuantity\",value:formData.stockQuantity,onChange:handleChange,min:\"0\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:isLoading,children:isLoading?'Kaydediliyor...':isEditMode?'G�ncelle':'Olu�tur'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary ms-2\",onClick:()=>navigate(-1),children:\"\\uFFFDptal\"})]})]});};export default ProductForm;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","useDispatch","useSelector","createProduct","fetchProductById","editProduct","jsx","_jsx","jsxs","_jsxs","ProductForm","id","isEditMode","Boolean","navigate","dispatch","selectedProduct","isLoading","error","state","products","formData","setFormData","name","description","price","categoryId","imageUrl","stockQuantity","handleChange","e","value","target","_objectSpread","handleSubmit","preventDefault","productData","parseFloat","parseInt","product","unwrap","err","className","children","role","onSubmit","htmlFor","type","onChange","required","rows","min","step","max","placeholder","disabled","onClick"],"sources":["C:/XMLFinalClient/ecommerce-frontend/src/components/Products/ProductForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { createProduct, fetchProductById, editProduct } from '../../store/productSlice';\n\nconst ProductForm = () => {\n    const { id } = useParams();\n    const isEditMode = Boolean(id);\n    const navigate = useNavigate();\n    const dispatch = useDispatch();\n\n    const { selectedProduct, isLoading, error } = useSelector((state) => state.products);\n\n    const [formData, setFormData] = useState({\n        name: '',\n        description: '',\n        price: '',\n        categoryId: '',\n        imageUrl: '',\n        stockQuantity: ''\n    });\n\n    useEffect(() => {\n        if (isEditMode) {\n            dispatch(fetchProductById(id));\n        }\n    }, [dispatch, id, isEditMode]);\n\n    useEffect(() => {\n        if (isEditMode && selectedProduct) {\n            setFormData({\n                name: selectedProduct.name,\n                description: selectedProduct.description,\n                price: selectedProduct.price,\n                categoryId: selectedProduct.categoryId,\n                imageUrl: selectedProduct.imageUrl,\n                stockQuantity: selectedProduct.stockQuantity\n            });\n        }\n    }, [selectedProduct, isEditMode]);\n\n    const handleChange = (e) => {\n        const { name, value } = e.target;\n        setFormData({ ...formData, [name]: value });\n    };\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n\n        // Form verilerini do�ru formata d�n��t�r\n        const productData = {\n            ...formData,\n            price: parseFloat(formData.price),\n            categoryId: parseInt(formData.categoryId),\n            stockQuantity: parseInt(formData.stockQuantity)\n        };\n\n        try {\n            if (isEditMode) {\n                await dispatch(editProduct({ id, product: productData })).unwrap();\n            } else {\n                await dispatch(createProduct(productData)).unwrap();\n            }\n            navigate('/products');\n        } catch (err) {\n            // Error is handled by the reducer\n        }\n    };\n\n    if (isEditMode && isLoading) {\n        return (\n            <div className=\"text-center my-5\">\n                <div className=\"spinner-border\" role=\"status\">\n                    <span className=\"visually-hidden\">Y�kleniyor...</span>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"container my-4\">\n            <h2>{isEditMode ? '�r�n D�zenle' : 'Yeni �r�n Ekle'}</h2>\n\n            {error && <div className=\"alert alert-danger\">{error}</div>}\n\n            <form onSubmit={handleSubmit}>\n                <div className=\"mb-3\">\n                    <label htmlFor=\"name\" className=\"form-label\">�r�n Ad�</label>\n                    <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        id=\"name\"\n                        name=\"name\"\n                        value={formData.name}\n                        onChange={handleChange}\n                        required\n                    />\n                </div>\n\n                <div className=\"mb-3\">\n                    <label htmlFor=\"description\" className=\"form-label\">A��klama</label>\n                    <textarea\n                        className=\"form-control\"\n                        id=\"description\"\n                        name=\"description\"\n                        rows=\"3\"\n                        value={formData.description}\n                        onChange={handleChange}\n                        required\n                    ></textarea>\n                </div>\n\n                <div className=\"mb-3\">\n                    <label htmlFor=\"price\" className=\"form-label\">Fiyat</label>\n                    <input\n                        type=\"number\"\n                        className=\"form-control\"\n                        id=\"price\"\n                        name=\"price\"\n                        value={formData.price}\n                        onChange={handleChange}\n                        min=\"0\"\n                        step=\"0.01\"\n                        required\n                    />\n                </div>\n\n                <div className=\"mb-3\">\n                    <label htmlFor=\"categoryId\" className=\"form-label\">Kategori ID</label>\n                    <input\n                        type=\"number\"\n                        className=\"form-control\"\n                        id=\"categoryId\"\n                        name=\"categoryId\"\n                        value={formData.categoryId}\n                        onChange={handleChange}\n                        min=\"1\"\n                        max=\"10\"\n                        required\n                    />\n                </div>\n\n                <div className=\"mb-3\">\n                    <label htmlFor=\"imageUrl\" className=\"form-label\">Resim URL</label>\n                    <input\n                        type=\"text\"\n                        className=\"form-control\"\n                        id=\"imageUrl\"\n                        name=\"imageUrl\"\n                        value={formData.imageUrl}\n                        onChange={handleChange}\n                        placeholder=\"/images/ornek.jpg\"\n                        required\n                    />\n                </div>\n\n                <div className=\"mb-3\">\n                    <label htmlFor=\"stockQuantity\" className=\"form-label\">Stok Miktar�</label>\n                    <input\n                        type=\"number\"\n                        className=\"form-control\"\n                        id=\"stockQuantity\"\n                        name=\"stockQuantity\"\n                        value={formData.stockQuantity}\n                        onChange={handleChange}\n                        min=\"0\"\n                        required\n                    />\n                </div>\n\n                <button type=\"submit\" className=\"btn btn-primary\" disabled={isLoading}>\n                    {isLoading ? 'Kaydediliyor...' : (isEditMode ? 'G�ncelle' : 'Olu�tur')}\n                </button>\n\n                <button\n                    type=\"button\"\n                    className=\"btn btn-secondary ms-2\"\n                    onClick={() => navigate(-1)}\n                >\n                    �ptal\n                </button>\n            </form>\n        </div>\n    );\n};\n\nexport default ProductForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}